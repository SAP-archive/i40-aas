dist: xenial
language: node_js
node_js:
  - 11

git:
  depth: 1

script:
  - printenv

before_install:
  - npm install
  - npm test

install:
  - npm run build

before_deploy:
  - echo "GIT LOGIN, BRANCH AND COMMIT"

deploy:
  - provider: script
    script: echo "GIT PUSH TO BRANCH"
    on:
      all_branches: true
      condition: $TRAVIS_TAG =~ /^((v([0-9]+)\.([0-9]+)\.([0-9]+)(?:-([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?)(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?)$/
